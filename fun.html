<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.i">
    <title>Random numbers</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

</head>
<style>
    .carousel {
        overflow: visible;
        
    }
    .carousel-item {
       
        border: 1px black solid;
        text-align: center;
        background-color: grey;
        color: white;
        font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;

    }
    #one, #two, #three, #four, #five, #six, #seven, #eight, #nine, #ten {
        height: 450px;
        width: 430px;
    }
    

    header {
        background-color: blue;
        height: 200px;
        font-size: 50px;
        text-align: center;
    }

    section {
        background-color: grey;
        width: 300px;
        height: 500px;
        float: left;
    }

    h4 {
        font-size: 30px;
        font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
    }

    a {
        display: block;
        margin-bottom: 20px;
        font-size: 20px;

    }

    #breweryLink {
        font-size: 16;
        font-weight: bolder;
    }

    #fishingReport {
        background-color: grey;
        width: 950px;
        float: left;
        height: 500px;
        margin-left: 50px;
        margin-bottom: 50px;
        overflow: scroll;
    }

    #mainSection {
        float: left;
        margin-bottom: 20px;
    }

    #info {
        clear: both;
        height: 200px;
        background-color: grey;
        width: 1300px;
    }

    li {
        list-style: none;
        font-weight: bolder;
        font-size: 16px;
    }

    .breweryOptions {
        border: 1px black solid;
        background-color: beige;
    }

    #bName {
        font-size: 20px;
        font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
        font-weight: bolder;
    }
</style>

<body>

    <header>RIGS & RODS</header>
    <div>
        <div> 
            <div class="carousel">
                <div class="carousel-item" id='one'></div>
                <div class="carousel-item" id='two'></div>
                <div class="carousel-item" id='three'></div>
                <div class="carousel-item" id='four'></div>
                <div class="carousel-item" id='five'></div>
                <div class="carousel-item" id='six'></div>
                <div class="carousel-item" id='seven'></div>
                <div class="carousel-item" id='eight'></div>
                <div class="carousel-item" id='nine'></div>
                <div class="carousel-item" id='ten'></div>
            </div>
        </div>

            
        </div>
    </div>
    </div>

    <script>

        window.onload = function () {

            var apiKey = "3ecacdc43749b0d1697331f53d557613";
            var appId = "b81fa997";
            var cuisine = "portuguese";
            var queryURL = `https://api.edamam.com/search?q=${cuisine}&app_id=${appId}&app_key=${apiKey}&from=0&to=10`;

            var recipes = [];
            var display = ["one", "two", "three", "four", "five", "six", "seven", "eight", "nine", "ten"]
            $(document).ready(function () {
                $('.carousel').carousel();
        
            });
            $('.carousel.carousel-slider').carousel({
                fullWidth: true
            });
           
        
            function appendRecipes(recipes) {

                var calories = Math.floor(recipes[0].info.calories / recipes[0].info.yield);

                console.log(recipes[0].info.label);
                console.log(recipes[0].info.image);
                console.log(recipes[0].info.url);
                console.log(calories);
                console.log(recipes[0].info.yield);
               
               for (var i = 0; i < display.length; i++){

                var calories = Math.floor(recipes[i].info.calories / recipes[i].info.yield);

                $(`#${display[i]}`).append(`

                    <h5>${recipes[0].info.label}</h5>
                    <a href ='${recipes[i].info.url}'><img src =${recipes[i].info.image}></a>                    
                    <p>Calories per serving : ${calories}</p>
                    <p>Servingds : ${recipes[i].info.yield}</p>

                    `);
                $(".carousel").append($(`${display[i]}`));
               }




            }
        


            function getRecipes() {

                $.ajax({

                    url: queryURL,
                    method: "GET"

                }).then(function (response) {

                    var result = [];
                    for (var i = 0; i < response.hits.length; i++) {
                        var tempObj = { type: response.q, info: response.hits[i].recipe };
                        result.push(tempObj);
                    }
                    console.log('inThen: ', result);
                    recipes = result;
                    appendRecipes(result);
                })

            }

            //     for (var i = 0; i < response.hits.length; i++){

            //         var label = response.hits[i].recipe.label;
            //         var url = response.hits[i].recipe.url;
            //         var calories = Math.floor(response.hits[i].recipe.calories.toFixed(0) / response.hits[i].recipe.yield);
            //         var image = response.hits[i].recipe.image;
            //         var servings = response.hits[i].recipe.yield;
            //         console.log('label: ', label);
            //         console.log('URL: ', url);
            //             for (var j = 0; j < response.hits[i].recipe.ingredientLines.length; j++ ){                
            //                 var ingredients = response.hits[i].recipe.ingredientLines[j];
            //             }
            //             var display = $("<div>");
            //                 display.append(`
            //                     <p>${label}</p>
            //                     <img src =${image}>
            //                     <p>${url}</p>
            //                     <p>${calories}</p>
            //                     <p>${servings}</p>
            //                 `)
            //                 console.log(display)
            //             for (var k = 0; k < 10; k++){

            //                 var recipeDisplay = $("<a class='carousel-item' href='#five!''></a>");
            //                 recipeDisplay.attr("id","display"+k);
            //                 $(".carousel").append(recipeDisplay);
            //                 recipeDisplay.text(display)

            //             }



            // 

            getRecipes();


        }

    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
        integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPoiiEjwBvKU7imGFAViwwj1yYfoRSJoZ+n"
        crossorigin="anonymous"></script>


</body>

</html>